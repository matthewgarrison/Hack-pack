\startsection{Miscellaneous}

\subsection*{Bell numbers} 

The number of partitions a set of n elements has. (Partition of a set: grouping of the set's elements into non-empty subsets, in such a way that every element is included in one and only one of the subsets.)

$B = \{1, 1, 2, 5, 15, 52, 203, 877, 4140, 21147, 115975, 678570, 4213597, 27644437, 190899322, 1382958545\}$

$$B_{n+1} = \sum^n_{k=0} \binom{n}{k} B_k \formsep B_n = \sum^n_{k=0} \genfrac{\{}{\}}{0pt}{}{n}{k}$$

The Bell numbers can be calculated with the Bell triangle (similar to Pascal's triangle), where B\subscript{n} is the first number in the n\textsuperscript{th} row.

\begin{center}
    \begin{tabular}{l}
    1\\
    1 2\\
    2 3 5\\
    5 7 10 15\\
    15 20 27 37 52\\
    \end{tabular}
\end{center}

\lstinputlisting{math/code/misc_bell1.java}

\subsection*{Catalan numbers}

The only Catalan numbers $C_n$ that are odd are those for which $n=2^k-1$. All others are even.

The only prime Catalan numbers are $C_2=2$ and $C_3=5$.

$C = \{1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, 58786, 208012, 742900, 2674440, 9694845, 35357670\}$

$$
    C_n = \frac{1}{n+1}\binom{2n}{n} = \binom{2n}{n} - \binom{2n}{n+1} = \frac{(2n)!}{(n+1)!n!} = \prod_{k=2}^{n} \frac{n+k}{k} = \frac{1}{n+1}\sum_{i=0}^{n}\binom{n}{i}^2 = \int_{0}^{4}x^n\frac{1}{2\pi}\sqrt{\frac{4-x}{x}} dx
$$
$$C_0 = 1 \formsep C_{n+1} = \sum_{i=0}^{n}C_i C_{n-i} = \frac{2(2n + 1)}{n+2}C_n$$

\subsection*{Coupon collector's problem}

Suppose there is an urn with n different coupons. What is the probability that more than $t$ sample trials are needed to collect all n coupons? Or, given n coupons, how many coupons do you expect you need to draw with replacement before having drawn each coupon at least once? Alternatively, how many times do you expect to need to roll an $n$-sided die in order to have every number come up at least once?

The answer: $n H_n$, where $n$ is the number of coupons and $H_n$ is the n\textsuperscript{th} Harmonic number.

$$H_n = 1 + \frac{1}{2} + \frac{1}{3} + ... + \frac{1}{n} = \sum_{k=1}^n \frac{1}{k}$$

\subsection*{Digital root formula}

The digital root of a non-negative $n$ is the result of repeatedly summing the digits of $n$. Eg. the digital root of 65,536 is 7 because $dr(65536) = 6+5+5+3+6 = 25$ and $dr(25) = 2+5 = 7$. 

$dr(n) = 1 + ((n-1) \text{ mod } 9)$. To generalize to another base $b$, change $9$ to $b-1$.

\subsection*{Double equality}

It can be hard to check equality in doubles due to floating point errors. This method will check for equality if floating point errors are possible:

\lstinputlisting{math/code/misc_doubleequal1.java}

10\textsuperscript{-9} is generally a good value for \inline{EPSILON}. Also, most problems involving doubles will tell you how much error two values can have and still be considered equal.

\subsection*{Evaluating polynomials at a point}

Given an array of the coefficients of a polynomial you can find the value of the polynomial evaluated at \inline{x} (ie. $f(x)$). This works by the remainder theorem.

\lstinputlisting{math/code/misc_evalpoly1.java}

Note that the array of coefficients should be in descending order. If \inline{P(x) = 3x\textsuperscript{2} - 2x + 1}, then the array should equal \inline{\{3, -2, 1\}}.

\subsection*{Fibonacci sequence}

$F = \{0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610\}$

$x$ is a part of the Fibonacci sequence iff one or both of $5x^2 + 4$ or $5x^2 - 4$ is a perfect square.

Every 3\textsuperscript{rd} number of the sequence is even and more generally, every k\textsuperscript{th} number of the sequence is a multiple of F\subscript{k}. In fact, it satisfies the stronger divisibility property $GCD(F_m, F_n) = F_{GCD(m, n)}$.

Any three consecutive Fibonacci numbers are pairwise coprime, ie. $GCD(F_n, F_{n+1}) = GCD(F_n, F_{n+2}) = GCD(F_{n+1}, F_{n+2}) = 1$.

Every prime number $p$ divides a Fibonacci number that can be determined by the value of $p \mymod{5}$. If p is congruent to 1 or 4 (mod 5), then $p$ divides F\subscript{p-1}, and if p is congruent to 2 or 3 (mod 5), then, p divides F\subscript{p+1}. The remaining case is that $p = 5$, and in this case $p$ divides F\subscript{p}.

You can use matrices to calculate the Fibonacci sequence. This matrix representation gives the following closed expression for the Fibonacci numbers:

\begin{equation*}
    \begin{bmatrix}
        F_{n+1} & F_n \\
        F_n & F_{n-1}
    \end{bmatrix}
    =
    \begin{bmatrix}
        1 & 1 \\
        1 & 0
    \end{bmatrix}
    ^n
    \formsep
    \begin{bmatrix}
        F_n \\
        F_{n-1}
    \end{bmatrix}
    =
    \begin{bmatrix}
        1 & 1 \\
        1 & 0
    \end{bmatrix}
    \begin{bmatrix}
        F_{n-1} \\
        F_{n-2}
    \end{bmatrix}
\end{equation*}

\textbf{Generalization}

If $F_0 = a$ and $F_1 = b$, then:

\begin{equation*}
    \begin{bmatrix}
        F_n \\
        F_{n-1}
    \end{bmatrix}
    =
    \begin{bmatrix}
        1 & 1 \\
        1 & 0
    \end{bmatrix}
    ^{n-1}
    \begin{bmatrix}
        b \\
        a
    \end{bmatrix}
\end{equation*}

If $a = b = 1$, then the Fibonacci sequence will be "shifted" to the left by one. For example, 8 is the 6\textsuperscript{th} Fibonacci number, but would be the 5\textsuperscript{th} in the generalized Fibonacci sequence.

(If $a = 0$ and $b = 1$, then it will be the normal sequence.)

\subsection*{Finding the average of two values}

Obviously, you can do it like this: \inline{int c = (a + b) >> 1;}

However, that can lead to overflows. This will not: \inline{int c = a + ((b - a) >> 1);}

Alternatively: \inline{((x $\wedge$ y) >> 1) + (x \& y)}

\subsection*{Log properties}

$$log_b(x) = \frac{log_y(x)}{log_y(b)} \text{, where } y \text{ is any base}$$

\subsection*{Pascal's triangle}

\begin{center}
1 \\
1 1 \\
1 2 1 \\
1 3 3 1 \\
1 4 6 4 1 \\
1 5 10 10 5 1
\end{center}

Pascal’s triangle is a triangular array of the binomial coefficients, that is $(x + y)^n$. The rows (designated by $n$) and columns (designated by $k$) are 0-indexed. So 6 is at row 4, column 2. This is also known as \textit{n choose k} or $\binom{n}{k}$.

\lstinputlisting{math/code/misc_pascal1.java}

Given the n\textsuperscript{th} row of Pascal's triangle (in \inline{coefficients}) and values of a and b (from the expression $(ax + by)^{pow}$), this will give you the coefficients of the expanded binomial expression.

\lstinputlisting{math/code/misc_pascal2.java}

\subsection*{Pigeonhole principle}

The pigeonhole principle states that if $k$ objects are placed into $n$ boxes, then at least one box must hold at least $\lceil \frac{n}{k} \rceil$ objects.

\subsection*{Primality}

This is a longer isPrime method, but one that is faster than the “na\"{\i}ve version.

\lstinputlisting{math/code/misc_primality1.java}

\subsection*{Prime factorization}

This finds all the prime factors (and not non-prime factors) because of the same principle as the prime sieve.

\lstinputlisting{math/code/misc_primefact1.java}

\subsection*{Pythagorean triple}

A Pythagorean Triple is 3 numbers, a, b, c, such that $a^2 + b^2 = c^2$. For all Pythagorean Triples, there exist positive integers x and y, with x $>$ y, such that:
$$a = x^2 - y^2 \formsep b = 2xy \formsep c = x^2 + y^2$$

\subsection*{Sequences}

Sum of an arithmetic sequence: $\frac{n(a_1 + a_n)}{2}$

Sum of a geometric sequence: $a_1 ( \frac{1 - r^n}{1 - r} )$

Sum of infinite geometric sequence (where $|r| < 1$): $\frac{a}{1 - r}$

Sum of the first $n$ numbers: $\frac{n(n+1)}{2}$

Sum of the first $n$ odd numbers: $n^2$

Sum of the first $n$ even numbers: $n(n+1)$

Sum of the first $n$ squares: $\frac{n (2n+1) (n+1)}{6}$

Sum of the first $n$ cubes: $( \frac{n(n+1)}{2}) ^2$

\subsection*{Stirling numbers (first kind)}

The number of of permutations of $n$ elements with $k$ disjoint cycles (denoted $c(n, k)$, $\lvert s(n, k) \rvert$, or $\genfrac{[}{]}{0pt}{}{n}{k}$). For example, there are 6 permutations of 3 elements. Of those permutations, one has three cycles, three have two cycles, and two have one cycles. Therefore, $\genfrac{[}{]}{0pt}{}{3}{3} = 1$, $\genfrac{[}{]}{0pt}{}{3}{2} = 3$, and $\genfrac{[}{]}{0pt}{}{3}{1} = 2$.
$$\genfrac{[}{]}{0pt}{}{n+1}{k} = n \genfrac{[}{]}{0pt}{}{n}{k} + \genfrac{[}{]}{0pt}{}{n}{k-1} \text{, for } k > 0 \text{, with the initial conditions } \genfrac{[}{]}{0pt}{}{0}{0} = 1 \text{ and } \genfrac{[}{]}{0pt}{}{n}{0} = \genfrac{[}{]}{0pt}{}{0}{n} = 0 \text{, for } n > 0$$
$$\genfrac{[}{]}{0pt}{}{n}{k} = 0 \text{, if } k > n \formsep \genfrac{[}{]}{0pt}{}{n}{1} = (n-1)! \formsep \genfrac{[}{]}{0pt}{}{n}{n} = 1 \formsep \genfrac{[}{]}{0pt}{}{n}{n-1} = \binom{n}{2}$$
$$\genfrac{[}{]}{0pt}{}{n}{n-2} = \frac{1}{4} (3n-1) \binom{n}{3} \formsep \genfrac{[}{]}{0pt}{}{n}{n-3} = \binom{n}{2} \binom{n}{4} \formsep \sum_{k=0}^n \genfrac{[}{]}{0pt}{}{n}{k} = \genfrac{[}{]}{0pt}{}{n+1}{1}$$

\begin{center}
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
        \hline
        n / k & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 \\
        \hline
        0 & 1 & & & & & & & & & \\
        \hline
        1 & 0 & 1 & & & & & & & & \\
        \hline
        2 & 0 & 1 & 1 & & & & & & & \\
        \hline
        3 & 0 & 2 & 3 & 1 & & & & & & \\
        \hline
        4 & 0 & 6 & 11 & 6 & 1 & & & & & \\
        \hline
        5 & 0 & 24 & 50 & 35 & 10 & 1 & & & & \\
        \hline
        6 & 0 & 120 & 274 & 225 & 85 & 15 & 1 & & & \\
        \hline
        7 & 0 & 720 & 1764 & 1624 & 735 & 175 & 21 & 1 & & \\
        \hline
        8 & 0 & 5040 & 13068 & 13132 & 6769 & 1960 & 322 & 28 & 1 & \\
        \hline
        9 & 0 & 40320 & 109584 & 118124 & 67284 & 22449 & 4536 & 546 & 36 & 1 \\
        \hline
    \end{tabular}
\end{center}

\subsection*{Stirling numbers (second kind)}

The number of ways to partition a set of $n$ distinguishable objects into $k$ non-empty subsets (denoted $S(n, k)$ or $\genfrac{\{}{\}}{0pt}{}{n}{k}$).
$$S(n, k) = S(n-1, k-1) + k*S(n-1, k) = \frac{1}{k!} \sum_{j=0}^k (-1)^{k-j} \binom{k}{j} j^n$$

\begin{center}
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
        \hline
        n / k & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 \\
        \hline
        0 & 1 & & & & & & & & & & \\
        \hline
        1 & 0 & 1 & & & & & & & & & \\
        \hline
        2 & 0 & 1 & 1 & & & & & & & & \\
        \hline
        3 & 0 & 1 & 3 & 1 & & & & & & & \\
        \hline
        4 & 0 & 1 & 7 & 6 & 1 & & & & & & \\
        \hline
        5 & 0 & 1 & 15 & 25 & 10 & 1 & & & & & \\
        \hline
        6 & 0 & 1 & 31 & 90 & 65 & 15 & 1 & & & & \\
        \hline
        7 & 0 & 1 & 63 & 301 & 350 & 140 & 21 & 1 & & & \\
        \hline
        8 & 0 & 1 & 127 & 966 & 1701 & 1050 & 266 & 28 & 1 & & \\
        \hline
        9 & 0 & 1 & 255 & 3025 & 7770 & 6951 & 2946 & 462 & 36 & 1 & \\
        \hline
        10 & 0 & 1 & 511 & 9330 & 34105 & 42525 & 22827 & 5880 & 750 & 45 & 1 \\
        \hline
    \end{tabular}
\end{center}

The sum over the values for k of the Stirling numbers of the second kind, gives us $\displaystyle B_n = \sum_{k=0}^n \genfrac{\{}{\}}{0pt}{}{n}{k}$, ie. the n\textsuperscript{th} Bell number.

\subsection*{Stirling's approximation}

$$\text{ln}(n!) \approx n \text{ln}(n) - n \formsep n! \approx \sqrt{2 \pi n} \bigg(\frac{n}{e} \bigg)^n$$

\newpage